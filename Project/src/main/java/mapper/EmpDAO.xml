<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.EmpDAO">
	<!-- <select id="isMember" resultType="dto_vo.Emp.Emp">
		SELECT * FROM EMP WHERE USERID=#{userid}
	</select>
	<select id="isMemberInfo" resultType="dto_vo.Emp.Empinfo">
		SELECT * FROM EMPINFO WHERE USERID=#{userid}
	</select> -->

	<select id="getEmp" resultType="dto_vo.Emp.Emp">
		SELECT * FROM EMP WHERE USERID=#{userid}
	</select>
	<select id="getEmpInfo" resultType="dto_vo.Emp.Empinfo">
		SELECT * FROM EMPINFO WHERE USERID=#{userid}
	</select>
	
	<select id="getEmpDept" resultType="String">
		select d.DEPTNAME
	    from emp e join dept d 
	    on e.DEPTCODE = d.DEPTCODE
	    where userid = #{userid}
	</select>
	<select id="getEmpTeam" resultType="String">
		select t.TEAMNAME
	    from emp e join team t 
	    on e.TEAMCODE = t.TEAMCODE
	    where userid = #{userid}
	</select>
	<select id="getEmpPos" resultType="String">
		select p.POSNAME
	    from emp e join position p 
	    on e.POSCODE = p.POSCODE
	    where userid = #{userid}
	</select>
	
	<insert id="joinMember">
      INSERT INTO EMP VALUES(#{userid}, emp_empno.nextval, #{emppwd}, #{ename}, '010-1234-5678', #{deptcode}, #{teamcode}, #{poscode}, 0)
   </insert>
   <insert id="joinMemberInfo">
      INSERT INTO EMPINFO VALUES(#{userid}, #{userphoto, jdbcType=VARCHAR}, #{useremail, jdbcType=VARCHAR}, #{birth, jdbcType=VARCHAR}, #{useraddr, jdbcType=VARCHAR}, 
                           #{usertel, jdbcType=VARCHAR}, #{usermobile, jdbcType=VARCHAR}, #{hiredate, jdbcType=VARCHAR}, null)
   </insert>
	
</mapper>